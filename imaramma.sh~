#! /bin/bash


dur=300 # 5 minutes
slide_dur=25

cp start.svg score.svg

#starttime=`date +%s`
#difft=0
total=0
loop=1
#index=0
first=1
while [[ $loop > 0 ]]
    do
        before=`date +%s`
        ./test.py
        #score_img=score$index.svg
        #mv score.svg demo/$score_img
        mv Test.svg score.svg
        after=`date +%s`
        difft=$(( $after - $before ))
        difft=$(( $slide_dur - $difft ))
        echo $difft
        if [[ $first == 1 ]]
            then
                echo $slide_dur
                sleep $slide_dur
                first=0
            else
                sleep $difft
        fi
        #curtime=`date +%s`
        #difft=$(($curtime - $starttime))
        total=$(( $total + $slide_dur ))
        loop=$(( $total < $dur ))
        echo total is $total
        #echo loop $curtime $difft $dur $loop
        #index=$(($index + 1))
done

#score_img = score$index.svg
#mv score.svg demo/$score_img

cp end.svg score.svg

#index=$(($index + 1))
#score_img = score$index.svg
#mv score.svg demo/$score_img

sleep 20

cp start.svg score.svg
